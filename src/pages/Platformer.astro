---
import BaseLayout from '../layouts/baseLayout.astro';
import Hero from '../components/Hero/Hero.astro';
import Description from '../components/Hero/Description.astro';
import ProjectDemo from '../components/projects/projectDemo.astro';
import IframeComponent from '../components/projects/iframme.astro';
import ChallengesSection from '../components/projects/challengesSection.astro';
import ReflectionsSection from '../components/projects/reflectionsSection.astro';
import DevDiary from '../components/projects/devDiary.astro';

// Import project images
import HomeIMg from '../assets/Projects/Platformer/home.png';
import Level1Img from '../assets/Projects/Platformer/level1.png';
import level1OverviewImg from '../assets/Projects/Platformer/level 1overveiw.png';
import Level2Img from '../assets/Projects/Platformer/level 2.png';
import Level2OverviewImg from '../assets/Projects/Platformer/level2overveiw.png';
import Level3Img from '../assets/Projects/Platformer/level 3.png';
import Level4Img from '../assets/Projects/Platformer/level 4.png';
import level3OverviewImg from '../assets/Projects/Platformer/level 3 overveiw.png';
import PlatformerDemo1 from '../assets/Projects/Platformer/level1demo_noaudio.mp4';
import PlatformerDemo2 from '../assets/Projects/Platformer/level2demo_noaudio.mp4';
import PlatformerDemo3 from '../assets/Projects/Platformer/level3demo_noaudio.mp4';
import PlatformerDemo4 from '../assets/Projects/Platformer/level4demo_noaudio.mp4';
import tutorialImg from '../assets/Projects/Platformer/tutorial.png';

const pageTitle = "Platformer Game";
// Define challenges data
const challenges = [
    {
        icon: "üß†",
        title:  "A* pathfinding performance",
        description: "The A* pathfinding algorithm was causing performance issues when there were too many enemies on screen. I had to optimize the algorithm by switching to a heap rather than individual lists for open and closed nodes, which significantly improved performance. This increased my performance reducing stuttering."
    },
    {
        icon: " üêª",
        title: "Getting Bear to change heights",
        description: "Could not get the bear to naturally change height without floating using A* apathfinding. So i switched over to node based patrolling to get a smoother motion. This allowed the bear to move between nodes and change height naturally without as much floating."
    },
    {
        icon: " üó∫Ô∏è",
        title: "Level design",
        description: "I struggled with creating engaging and unique levels that focus on diffrent aspects of the game. I had to iterate on the level design multiple times to ensure that each level was fun and challenging. I also had to balance the difficulty of the levels to ensure that they were not too easy or too hard."
    },
    {
        icon: "üéÅ",
        title: "Pickups are Collecting when not in range",
        description: "I never found out why this hapens, after checking collision boxes and changing detection type my fix for this was changing the pickups to a keinematic object"
    }
];

// Define lessons/reflections data  
const lessons = [
    {
        icon: "üß©",
        title: "Breaking down scripts into smaller components",
        description: "As I progressed through the project, I found my player movement script handled more than it should have like audio and collisions, I should have separated these into smaller scripts to reduce complexity."
    },
    {
        icon: "‚¨áÔ∏è",
        title: "Directional collision direction",
        description: "I used collision points and height to determine the direction of the collision, I found I over-engineered this as I could have just checked the player's height in relation to the enemy and if it had a downward movement."
    },
    {
        icon: "ü§ñ",
        title: "State machine for enemy AI",
        description: "I used a state machine to manage the enemy AI, allowing swaping of behaviours on the fly. This made it easier to add new enemy types and behaviours without having to rewrite the entire AI system."
    },
    {
        icon: "üß≠",
        title: "A* Pathfinding",
        description: "I implemented this to allow a more dynamic enemy movement system, allowing enemies to navigate around obstacles and chase the player. This made the game more challenging and engaging rather than just having enemies move in a straight line."
    },
    {
        icon: "üß™",
        title: "Debug Level",
        description: "I created a debug/intro level where i would introduicce the player to the game mechanics and controls. This allowed me to test the game mechanics and ensure that they were working as intended in a controlled enviroment before adding them to the main game."
    },
    {
        icon: "üó∫Ô∏è",
        title: "2D tilesmap to create the levels",
        description: "I used a 2D tilesmap to create the levels, allowing for more efficient level design and easier iteration on level layouts."
    },
    {
        icon: "üïπÔ∏è",
        title: "Importance of playtesting",
        description: "I had friends and family playtest, during which I took notes of struggles and glitches they encountered. This helped me identify areas of the game that needed improvement that I may have missed. From small things like signs that dont do anything to big oversights like lack of audio."
    }
];
---
<BaseLayout pageTitle={pageTitle} backgroundVariant="game">
    <Hero 
        title="Platformer Game"
        subtitle="A simple platformer game developed in Unity"
        showImage={true}
        image={HomeIMg},
        altText="platformer gameplay screenshot" 
    />
    <Description 
        description="A platformer game developed in Unity, showcasing skills in C# scripting, 2D tilemap level design, and camera control. The game features a player character that can jump, run, and collect items while avoiding enemies powered by state machine AI and A* pathfinding. Multiple levels were created using Unity's tilemap system, with event systems and multiple input sources for smooth gameplay. Extensive playtesting, optimization, and problem solving ensured a polished experience."
        showSkills={true}
        skillsTitle="Technologies Used"
        skills={["Unity", "C#", "Level design", "2D Tilemap", "A* Pathfinding", "User testing", "Problem solving","Optimization","Camera control","State machine","Event system","Multiple input sources"]}
        id="about"
    />
    <ProjectDemo 
        id="projects"
        projectTitle='Breakout Game'
        itchUrl="https://ghosthi.itch.io/platformer"
        media={[{
            type: 'image',
            src: HomeIMg.src,
            alt: 'Platformer home screen',
            caption: 'Home level of Platformer game'
            },
            {
                type: 'image',
                src: tutorialImg.src,
                alt: 'Tutorial level',
                caption: 'Tutorial/debug level for Platformer'
            },
            {
                type: 'image',
                src: Level1Img.src,
                alt: 'Level 1',
                caption: 'Level 1 for Platformer'
            },
            {
                type: 'image',
                src: level1OverviewImg.src,
                alt: 'Level 1 overview',
                caption: 'Overview of Level 1 for Platformer'
            },
            {
                type: 'video',
                src: PlatformerDemo1,
                alt: 'Level 1 overview',
                caption: 'demo of Level 1 for Platformer'
            },
            {
                type: 'image',
                src: Level2Img.src,
                alt: 'Level 2',
                caption: 'Level 2 for Platformer'
            },
            {
                type: 'image',
                src: Level2OverviewImg.src,
                alt: 'Level 2 overview',
                caption: 'Overview of Level 2 for Platformer'
            },
            {
                type: 'video',
                src: PlatformerDemo2,
                alt: 'Level 2 overview',
                caption: 'demo of Level 2 for Platformer'
            },
            {
                type: 'image',
                src: Level3Img.src,
                alt: 'Level 3',
                caption: 'Level 3 for Platformer'
            },
            {
                type: 'image',
                src: level3OverviewImg.src,
                alt: 'Level 3 overview',
                caption: 'Overview of Level 3 for Platformer'
            },
            {
                type: 'video',
                src: PlatformerDemo3,
                alt: 'Level 3 overview',
                caption: 'demo of Level 3 for Platformer'
            },
            {
                type: 'image',
                src: Level4Img.src,
                alt: 'Level 4',
                caption: 'Level 4 for Platformer'
            },
            {
                type: 'video',
                src: PlatformerDemo4,
                alt: 'Level 4 overview',
                caption: 'demo of Level 4 for Platformer'
            }
        ]}
    />
    <IframeComponent 
        embedUrl="https://itch.io/embed-upload/14414939?color=333333"
        fallbackUrl="https://ghosthi.itch.io/breakout"
        title="Platformer Game"
        width="100%"
        height="700px"
        id="Breakout-iframe"
    /> 
    <ChallengesSection challenges={challenges} />

    <ReflectionsSection 
        lessons={lessons}
        futureGoals='If I revisited this project, I would make my own assets to give it a more unique feel. I would also add more levels and powerups to make the game more engaging. Additionally, I would implement a timer to track the speed the player completes levels and displays it on the screen and add a leaderboard to enhance the competitive aspect of the game.'
    />

    <DevDiary url="https://app.affine.pro/workspace/2f1c57ac-8335-4413-94e5-a5c9f37dd436/hlVaMV6YzI" />
</BaseLayout>

